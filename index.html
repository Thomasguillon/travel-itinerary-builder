<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Travel Itinerary Builder</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      line-height: 1.6;
    }
    .container {
      max-width: 900px;
      margin: 20px auto;
      padding: 0 15px;
    }
    h1, h2, h3 {
      text-align: center;
      color: #333;
      margin-bottom: 20px;
    }
    form {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-bottom: 20px;
    }
    select, input, button {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 16px;
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #0056b3;
    }
    #output {
      margin-top: 20px;
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .error {
      color: #d9534f;
      font-weight: bold;
    }
    .upgrade {
      margin-top: 15px;
      font-style: italic;
      text-align: center;
    }
    .recommendations {
      margin-top: 20px;
      padding: 15px;
      background-color: #f9f9f9;
      border-radius: 8px;
    }
    a {
      color: #007bff;
      text-decoration: none;
    }
    a:hover {
      text-decoration: underline;
    }
    @media (max-width: 600px) {
      .container {
        padding: 0 10px;
      }
      h1 {
        font-size: 24px;
      }
      h2, h3 {
        font-size: 20px;
      }
      form, #output {
        padding: 15px;
      }
      select, input, button {
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Travel Itinerary Builder</h1>
    <p>Choose your preferences to get a 1-day free itinerary for Paris, France. Upgrade to premium for more options!</p>
    <form id="travelForm">
      <select name="country" id="countrySelect" required>
        <option value="" disabled selected>Select Country</option>
        <option value="France">France</option>
      </select>
      <select name="city" id="citySelect" required>
        <option value="" disabled selected>Select City</option>
      </select>
      <select name="interests" required>
        <option value="" disabled selected>Select Interest</option>
        <option value="art">Art</option>
        <option value="history">History</option>
        <option value="nature">Nature</option>
        <option value="adventure">Adventure</option>
        <option value="shopping">Shopping</option>
      </select>
      <select name="transport" required>
        <option value="" disabled selected>Select Transport</option>
        <option value="metro">Metro</option>
        <option value="taxi">Taxi</option>
        <option value="train">Train</option>
        <option value="tramway">Tramway</option>
      </select>
      <select name="food" required>
        <option value="" disabled selected>Select Food</option>
        <option value="French">French</option>
        <option value="Vegan">Vegan</option>
        <option value="Italian">Italian</option>
        <option value="Asian">Asian</option>
        <option value="Fast Food">Fast Food</option>
        <option value="Local Street Food">Local Street Food</option>
      </select>
      <select name="budget" required>
        <option value="" disabled selected>Select Budget Range (per person)</option>
        <option value="low">Low ($0-50)</option>
        <option value="medium">Medium ($51-150)</option>
        <option value="high">High ($151+)</option>
      </select>
      <select name="currency" required>
        <option value="" disabled selected>Select Currency</option>
        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
      </select>
      <select name="travelStyle" required>
        <option value="" disabled selected>Select Travel Style</option>
        <option value="solo">Solo</option>
        <option value="couple">Couple</option>
        <option value="family">Family</option>
        <option value="group">Group</option>
      </select>
      <select name="timeOfDay" required>
        <option value="" disabled selected>Select Time of Day Preference</option>
        <option value="morning">Morning</option>
        <option value="afternoon">Afternoon</option>
        <option value="evening">Evening</option>
      </select>
      <select name="accessibility" required>
        <option value="" disabled selected>Accessibility Needs?</option>
        <option value="no">No</option>
        <option value="yes">Yes (Wheelchair Accessible)</option>
      </select>
      <input type="text" name="code" placeholder="Premium Code (optional)">
      <button type="submit">Generate Itinerary</button>
    </form>
    <div id="output"></div>
  </div>

  <script>
    // Static JSON data for France (Paris only)
    const travelData = {
      "France": {
        "cities": {
          "Paris": {
            "transport": {
              "metro": { "cost": 2.3, "url": "https://www.ratp.fr/en", "accessibility": true },
              "taxi": { "cost": 16, "url": "https://www.paris.fr/en/pages/taxis-2415", "accessibility": true },
              "train": { "cost": 3.5, "url": "https://www.sncf.com/en", "accessibility": true },
              "tramway": { "cost": 2.3, "url": "https://www.ratp.fr/en", "accessibility": true }
            },
            "restaurants": {
              "French": [
                { "name": "Le Jules Verne", "cost": 150, "url": "https://www.restaurants-toureiffel.com/en/le-jules-verne.html", "style": "couple", "time": "evening", "accessibility": true },
                { "name": "Brasserie Lipp", "cost": 50, "url": "https://www.brasserielipp.fr/en/", "style": "group", "time": "afternoon", "accessibility": true }
              ],
              "Vegan": [
                { "name": "Le Potager de Charlotte", "cost": 30, "url": "https://www.lepotagerdecharlotte.fr/en/", "style": "solo", "time": "afternoon", "accessibility": true },
                { "name": "Gentle Gourmet", "cost": 40, "url": "https://www.gentlegourmet.fr/", "style": "family", "time": "evening", "accessibility": true }
              ],
              "Italian": [
                { "name": "Pizzeria Popolare", "cost": 25, "url": "https://www.bigmammagroup.com/en/trattorias/pizzeria-popolare", "style": "group", "time": "evening", "accessibility": true },
                { "name": "Il Vicolo", "cost": 35, "url": "https://www.ilvicolo-paris.fr/", "style": "couple", "time": "afternoon", "accessibility": true }
              ],
              "Asian": [
                { "name": "Shang Palace", "cost": 80, "url": "https://www.shangri-la.com/paris/shangrila/dining/restaurants/shang-palace/", "style": "couple", "time": "evening", "accessibility": true },
                { "name": "Kodawari Ramen", "cost": 20, "url": "https://www.kodawari-ramen.com/", "style": "solo", "time": "afternoon", "accessibility": true }
              ],
              "Fast Food": [
                { "name": "Five Guys", "cost": 15, "url": "https://www.fiveguys.fr/", "style": "family", "time": "afternoon", "accessibility": true },
                { "name": "McDonald’s", "cost": 10, "url": "https://www.mcdonalds.fr/", "style": "group", "time": "evening", "accessibility": true }
              ],
              "Local Street Food": [
                { "name": "Chez Alain Miam Miam", "cost": 10, "url": "https://www.paris.fr/pages/chez-alain-miam-miam-2415", "style": "solo", "time": "afternoon", "accessibility": true },
                { "name": "Marché des Enfants Rouges", "cost": 12, "url": "https://www.paris.fr/lieux/marche-des-enfants-rouges-1799", "style": "group", "time": "morning", "accessibility": true }
              ]
            },
            "activities": {
              "art": [
                { "name": "Louvre Museum", "cost": 20, "url": "https://www.louvre.fr/en", "style": "solo", "time": "morning", "accessibility": true },
                { "name": "Musée d’Orsay", "cost": 14, "url": "https://www.musee-orsay.fr/en", "style": "couple", "time": "afternoon", "accessibility": true }
              ],
              "history": [
                { "name": "Notre-Dame Cathedral", "cost": 0, "url": "https://www.notredamedeparis.fr/en/", "style": "family", "time": "morning", "accessibility": true },
                { "name": "Palace of Versailles", "cost": 19.5, "url": "https://en.chateauversailles.fr/", "style": "group", "time": "afternoon", "accessibility": true }
              ],
              "nature": [
                { "name": "Jardin des Tuileries", "cost": 0, "url": "https://www.paris.fr/lieux/jardin-des-tuileries-1795", "style": "family", "time": "morning", "accessibility": true },
                { "name": "Bois de Boulogne", "cost": 0, "url": "https://www.paris.fr/lieux/bois-de-boulogne-2468", "style": "group", "time": "afternoon", "accessibility": true }
              ],
              "adventure": [
                { "name": "Seine River Cruise", "cost": 15, "url": "https://www.bateauxparisiens.com/en/", "style": "couple", "time": "evening", "accessibility": true },
                { "name": "Eiffel Tower Summit", "cost": 26, "url": "https://www.toureiffel.paris/en", "style": "group", "time": "afternoon", "accessibility": true }
              ],
              "shopping": [
                { "name": "Galeries Lafayette", "cost": 0, "url": "https://www.galerieslafayette.com/en/", "style": "solo", "time": "afternoon", "accessibility": true },
                { "name": "Champs-Élysées", "cost": 0, "url": "https://www.paris.fr/lieux/avenue-des-champs-elysees-1793", "style": "group", "time": "evening", "accessibility": true }
              ]
            },
            "recommendations": {
              "low": {
                "activities": [
                  { "name": "Walk along the Seine", "cost": 0, "url": "https://www.paris.fr/lieux/quais-de-seine-1798" },
                  { "name": "Picnic at Luxembourg Gardens", "cost": 5, "url": "https://www.paris.fr/lieux/jardin-du-luxembourg-1807" }
                ],
                "restaurants": [
                  { "name": "Chez Gladines", "cost": 15, "url": "https://www.chezgladines.fr/", "type": "French" },
                  { "name": "Marché des Enfants Rouges Stalls", "cost": 12, "url": "https://www.paris.fr/lieux/marche-des-enfants-rouges-1799", "type": "Local Street Food" }
                ]
              },
              "medium": {
                "activities": [
                  { "name": "Seine River Cruise", "cost": 15, "url": "https://www.bateauxparisiens.com/en/" },
                  { "name": "Musée Rodin", "cost": 12, "url": "https://www.musee-rodin.fr/en" }
                ],
                "restaurants": [
                  { "name": "Le Potager de Charlotte", "cost": 30, "url": "https://www.lepotagerdecharlotte.fr/en/", "type": "Vegan" },
                  { "name": "Pizzeria Popolare", "cost": 25, "url": "https://www.bigmammagroup.com/en/trattorias/pizzeria-popolare", "type": "Italian" }
                ]
              },
              "high": {
                "activities": [
                  { "name": "Eiffel Tower Summit", "cost": 26, "url": "https://www.toureiffel.paris/en" },
                  { "name": "Palace of Versailles", "cost": 19.5, "url": "https://en.chateauversailles.fr/" }
                ],
                "restaurants": [
                  { "name": "Le Jules Verne", "cost": 150, "url": "https://www.restaurants-toureiffel.com/en/le-jules-verne.html", "type": "French" },
                  { "name": "Shang Palace", "cost": 80, "url": "https://www.shangri-la.com/paris/shangrila/dining/restaurants/shang-palace/", "type": "Asian" }
                ]
              }
            }
          }
        }
      }
    };

    // Currency conversion rates (as of March 2025, approximate)
    const exchangeRates = {
      "USD": 1,
      "EUR": 0.92 // 1 USD = 0.92 EUR
    };

    // Populate city dropdown based on selected country
    document.getElementById('countrySelect').addEventListener('change', function() {
      const country = this.value;
      const citySelect = document.getElementById('citySelect');
      citySelect.innerHTML = '<option value="" disabled selected>Select City</option>';

      if (country && travelData[country]) {
        const cities = Object.keys(travelData[country].cities);
        cities.forEach(city => {
          const option = document.createElement('option');
          option.value = city;
          option.textContent = city;
          citySelect.appendChild(option);
        });
      }
    });

    // Form submission logic
    document.getElementById('travelForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const form = e.target;
      const country = form.country.value;
      const city = form.city.value;
      const interests = form.interests.value;
      const transport = form.transport.value;
      const food = form.food.value;
      const budget = form.budget.value;
      const currency = form.currency.value;
      const travelStyle = form.travelStyle.value;
      const timeOfDay = form.timeOfDay.value;
      const accessibility = form.accessibility.value === "yes";
      const code = form.code.value.trim();
      const isPremium = code === 'TRAVEL2025';

      // Validate inputs
      if (!country || !city || !travelData[country] || !travelData[country].cities[city]) {
        document.getElementById('output').innerHTML = '<p class="error">Please select a valid country and city.</p>';
        return;
      }
      if (!interests) {
        document.getElementById('output').innerHTML = '<p class="error">Please select your interests.</p>';
        return;
      }
      if (!transport) {
        document.getElementById('output').innerHTML = '<p class="error">Please select your preferred transport.</p>';
        return;
      }
      if (!food) {
        document.getElementById('output').innerHTML = '<p class="error">Please select your food preference.</p>';
        return;
      }
      if (!budget) {
        document.getElementById('output').innerHTML = '<p class="error">Please select your budget range.</p>';
        return;
      }
      if (!currency) {
        document.getElementById('output').innerHTML = '<p class="error">Please select your currency.</p>';
        return;
      }
      if (!travelStyle) {
        document.getElementById('output').innerHTML = '<p class="error">Please select your travel style.</p>';
        return;
      }
      if (!timeOfDay) {
        document.getElementById('output').innerHTML = '<p class="error">Please select your time of day preference.</p>';
        return;
      }

      const cityData = travelData[country].cities[city];
      let itinerary = `<h2>Your ${city} 1-Day Free Itinerary</h2>`;
      let totalCost = 0;

      // Convert costs to selected currency
      const convertCost = (cost) => {
        const costInUSD = cost;
        const costInSelectedCurrency = costInUSD * exchangeRates[currency];
        return Math.round(costInSelectedCurrency * 100) / 100;
      };

      // Day 1 (free tier is limited to 1 day)
      const transportOption = cityData.transport[transport] || cityData.transport["metro"];
      if (accessibility && !transportOption.accessibility) {
        itinerary += `<p class="error">Note: ${transport} may not be wheelchair accessible. Consider alternative transport.</p>`;
      }

      const altTransportOptions = Object.keys(cityData.transport).filter(t => t !== transport);
      const altTransport = altTransportOptions.length > 0 ? altTransportOptions[0] : transport;
      const altTransportOption = cityData.transport[altTransport];

      // Filter activities based on accessibility, travel style, and time of day
      const activities = cityData.activities[interests].filter(activity => 
        (!accessibility || activity.accessibility) &&
        activity.style === travelStyle &&
        activity.time === timeOfDay
      );
      const activity = activities.length > 0 ? activities[0] : cityData.activities[interests][0];

      // Filter restaurants based on accessibility, travel style, and time of day
      const restaurants = cityData.restaurants[food].filter(restaurant => 
        (!accessibility || restaurant.accessibility) &&
        restaurant.style === travelStyle &&
        restaurant.time === timeOfDay
      );
      const restaurant = restaurants.length > 0 ? restaurants[0] : cityData.restaurants[food][0];

      // Check budget constraints
      totalCost = convertCost(transportOption.cost + activity.cost + restaurant.cost);
      let budgetLimit;
      switch (budget) {
        case "low": budgetLimit = 50; break;
        case "medium": budgetLimit = 150; break;
        case "high": budgetLimit = Infinity; break;
      }
      if (totalCost > budgetLimit) {
        itinerary += `<p class="error">Warning: Total cost ($${totalCost} ${currency}) exceeds your budget range. Consider adjusting your preferences.</p>`;
      }

      itinerary += `<h3>Day 1</h3>`;
      itinerary += `<p><strong>Transport:</strong> ${transport} ($${convertCost(transportOption.cost)} ${currency}, <a href="${transportOption.url}" target="_blank">${transportOption.url}</a>)</p>`;
      if (isPremium) itinerary += `<p><strong>Alternative Transport:</strong> ${altTransport} ($${convertCost(altTransportOption.cost)} ${currency}, <a href="${altTransportOption.url}" target="_blank">${altTransportOption.url}</a>)</p>`;
      itinerary += `<p><strong>Activity:</strong> ${activity.name} ($${convertCost(activity.cost)} ${currency}, <a href="${activity.url}" target="_blank">${activity.url}</a>)</p>`;
      itinerary += `<p><strong>Meal:</strong> ${restaurant.name} ($${convertCost(restaurant.cost)} ${currency}, <a href="${restaurant.url}" target="_blank">${restaurant.url}</a>)</p>`;
      itinerary += `<p><strong>Total Estimated Cost:</strong> $${totalCost} ${currency}</p>`;

      itinerary += `<p class="upgrade">Upgrade to Premium (code: TRAVEL2025) for your full trip plan! <span id="paypal-button-placeholder">[PayPal Button Placeholder]</span></p>`;

      // Add Recommendations/Popular Section based on budget
      const recommendations = cityData.recommendations[budget];
      itinerary += `<div class="recommendations">`;
      itinerary += `<h3>Popular Recommendations for Your Budget</h3>`;
      itinerary += `<p><strong>Activities:</strong></p>`;
      recommendations.activities.forEach(activity => {
        itinerary += `<p>- ${activity.name} ($${convertCost(activity.cost)} ${currency}, <a href="${activity.url}" target="_blank">${activity.url}</a>)</p>`;
      });
      itinerary += `<p><strong>Dining:</strong></p>`;
      recommendations.restaurants.forEach(restaurant => {
        itinerary += `<p>- ${restaurant.name} ($${convertCost(restaurant.cost)} ${currency}, <a href="${restaurant.url}" target="_blank">${restaurant.url}</a>, ${restaurant.type})</p>`;
      });
      itinerary += `</div>`;

      document.getElementById('output').innerHTML = itinerary;
    });
  </script>
</body>
</html>
